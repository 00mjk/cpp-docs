---
title: "Compiler Warning C5046 | Microsoft Docs"
ms.custom: ""
ms.date: "10/22/2018"
ms.technology: ["cpp-diagnostics"]
ms.topic: "error-reference"
dev_langs: ["C++"]
helpviewer_keywords: ["C5046"]
author: "joemmett"
ms.author: "joemmett"
ms.workload: ["cplusplus"]
---
# Compiler Warning (level 2) C5046

> '*function*' : Symbol involving type with internal linkage not defined

The compiler has detected a use of a function that does not have a definition, but the signature of this function involves types that are not visible outside
this translation unit. No other translation unit can provide a definition for this function because these types are not externally visible, so the program will ultimately
fail to link. Common reasons for types to be considered not visible across translation units include declaration inside an anonymous namespace, use of local or unnamed classes,
or specializations of templates involving these things as template arguments.

This warning is new in Visual Studio 2017.

## Example

This sample shows two C5046 warnings:

```cpp
// C5046p.cpp
// compile with: cl /c /W2 C5046p.cpp
namespace {
    struct S {
        // S::f is inside an anonymous namespace and cannot be defined outside of this file. If used it must be defined somewhere in this file.
        int f();
    };
}

typedef struct { int x; int y; } *PS;
// g has a pointer to an unnamed struct as a parameter type. This type is distinct from any similar type declared in other files so
// this function cannot be defined in any other file.
// N.B. if the struct was declared "typedef struct { int x; int y; } S, *PS;" it would have a "typedef name for linkage purposes" and
// g could be defined in another file that provides a compatible definition for S.
int g(PS p);

int main()
{
    S s;
    s.f(); // Use of S::f provokes warning C5046 as f is not defined.
    g(nullptr); // Use of g provokes warning C5046 as g is not defined.
}

```

